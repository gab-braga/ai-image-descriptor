<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>Image Cloud</title>

  <link rel="stylesheet" href="/bootstrap/css/bootstrap.min.css">
  <script defer src="/bootstrap/js/bootstrap.min.js"></script>
</head>

<body>

  <main class="w-100 min-vh-100 d-flex flex-column align-items-center justify-content-center">
    <form action="/" method="post" id="form-image-cloud" class="position-absolute visually-hidden" enctype="multipart/form-data">
      <input type="file" accept="image/*" id="field-image" name="image">
    </form>

    <div id="upload-container" style="width: clamp(300px, 80%, 550px);">
      <label for="field-image" class="w-100 d-inline-block card px-5 py-4" style="cursor: pointer;">
        <div class="d-flex flex-column align-items-center justify-content-center">
          <img src="/assets/cloud-up.svg" alt="upload image">
          <span class="d-inline-block text-center text-secondary fs-2" style="max-width: 14ch;">
            Drag and drop your image here
          </span>
        </div>
      </label>

      <button disabled type="submit" form="form-image-cloud" id="btn-send" class="w-100 btn btn-primary mt-4" style="cursor: pointer;">
        Send image
      </button>
    </div>

    <div id="progress-upload" class="d-none px-5 py-4" style="width: clamp(300px, 80%, 550px);">
      <div class="d-flex flex-column align-items-center justify-content-center">
        <img src="/assets/image.svg" alt="image">
        <span class="d-inline-block text-center text-secondary fs-2" style="max-width: 14ch;">
          Upload image
        </span>
        <div class="progress mt-3" role="progressbar" aria-label="Analyzing image" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" style="width: 15rem;">
          <div class="progress-bar progress-bar-striped progress-bar-animated bg-secondary" style="width: 100%"></div>
        </div>
      </div>
    </div>
  </main>

  <script>
    const fieldImage = document.querySelector("#field-image");
    const formImage = document.querySelector("#form-image-cloud");

    fieldImage.addEventListener("change", activeButton);
    formImage.addEventListener("submit", updateView);

    function activeButton() {
      const btnSend = document.querySelector("#btn-send");
      btnSend.disabled = false;
    }

    function updateView() {
      const uploadImage = document.querySelector("#upload-container");
      const progressUpload = document.querySelector("#progress-upload");
      uploadImage.classList.remove("d-inline-block");
      uploadImage.classList.add("d-none");
      progressUpload.classList.remove("d-none");
      progressUpload.classList.add("d-inline-block");
    }
  </script>

</body>

</html>